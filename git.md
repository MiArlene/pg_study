# 1. git

首先需要了解==版本控制==

## 1.1 版本控制

> 什么是版本控制，  版本迭代， 版本管理器！

版本控制是一种再开发的过程中用于管理我们对文件、目录或工程等内容的修改历史，方便查看历史记录，备份以便恢复以前的版本的软件工程技术。

- 实现跨区域多人协同开发
- 追踪和记载一个或者多个文件的历史记录
- 组织和保护你的源代码和文档
- 统计工作量
- 并行开发，提高开发效率
- 跟踪记录整个软件的开发过程
- 减轻开发人员的负担，节省时间，同时降低人为错误。

简单来说就是用于管理多人协同开发项目的技术。



> 常见的版本控制工具

主流的版本控制器有如下这些：

- Git
- SVN （subversion）
- CVS （Concurrent Version System）
- VSS （Microsoft Visual SourceSafe）
- TFS （Team Foundation Server）
- Visual Studio Online

现在最有影响力的是Git和SVN。



> 版本控制分类

1. **本地版本控制**

![img](http://www.yiibai.com/uploads/images/201703/0603/543160358_54085.png)

记录文件每次的跟新，可以对每个版本做一个快照，或是记录补丁文件，适用于个人， 如 RCS

2. **集中版本控制**

所有的版本数据都保存在服务器上，协同开发者从服务器上同步更新或上传自己的修改。

![img](http://www.yiibai.com/uploads/images/201703/0603/511160359_41788.png)

所有的版本数据都存在服务器上，用户的本地只有自己以前所同步的版本，如果不联网的话，用户就看不到历史版本，也无法切换版本验证问题，或在不同的分支工作，而且，所有数据哦都保存在单一的服务器上，有很大的风险这个服务器会坏掉，这样就会丢失所有的数据，当然可以定期备份。代表产品：SVN， CVS， VSS。

3. **分布式版本**

每个人都拥有全部的代码！ 这也是一大安全隐患。

所有的版本信息仓库全部同步到本地的每个用户，这样就可以在本地查看所有的版本历史，可以里现在本地提交，只需在联网是push到相应的服务器或其他用户那里。由于每个用户那里保存的都是所有的版本数据，只要有一个用户的设备没有问题就可以恢复所有的数据，但这增加了本地存储空间的占用！

不会因为服务器损坏或者网络问题，造成不能工作的情况！

![img](http://www.yiibai.com/uploads/images/201703/0603/837170301_11879.png)

> Git 与 SVN最主要的区别

SVN是集中式版本控制系统，版本库是集中放在中央处理器上，而工作时候，用的都是自己的电脑，所以首先要从中央服务器得到最新的版本，然后工作，完成工作后，需要把自己做完的活推送到中央服务器上，集中式版本控制系统是必须联网才能工作，对网络带宽要求较高。



Git是分布式版本控制系统，没有中央服务器，每个人的电脑就是一个完整的版本库，工作的时候不需要联网，因为版本都在自己的电脑上。协同的方法是这样的：比如自己在电脑上改了文件A，其他人也在电脑上改了文件A，这时，他们两之间只需把各自的修改推送给对方，就可以互相看到对方的修改了。Git可以直接看到更新了哪些代码和文件！

**Git是目前最先进的分布式版本控制系统**



## 1.2 Git环境配置

**Git Bash**：	 Unix与LInux风格的命令行，使用最多，推荐最多。

**Git CMD**： 	Windows风格的命令行。

**Git GUI**： 	  图形界面的Git，不建议初学者使用，尽量先熟悉常用命令。





> 基本的Linux命令

- cd ： 改变目录
- cd .. 回退到唱一个目录，直接cd进行默认目录
- pwd： 显示当前所在目录路径
- touch：新建一个文件 如 touch index.js  就会在当前目录下新建一个index.js 文件
- ls（ll）： 都是列出当前目录的所有文件，只不过**ll**列出的内容更加详细
- mkdir：新建一个目录，就是新建一个文件夹
- rm -r： 删除一个文件夹， rm -r  src  删除src目录

> rm -rf /   切勿在Linux 中尝试！ 删除电脑中全部文件。  Linux中一切皆文件！ / 表示根

- reset 重新初始化终端，清屏
- clear 清屏
- history 查看命令历史
- help 帮助
- exit 推出
- 、# 表示注释
- mv 移动文件， mv a b



> Git 配置

所有的配置文件，其实都保存在本地。

查看配置  ==git config -l==

查看不同级别的配置文件：

```shell
# 查看系统config
git config --system --list

# 查看当前用户(global) 配置
git config --global --list
```

**Git相关的配置文件：**

1. Git\mingw64\etc\gitconfig: Git安装目录下的gitconfig   --system 系统级
2. C:\Users\Administrator\.gitconfig  只适用于当前登录用户的配置， -- global 全局

这里可以直接编辑配置文件，通过命令设置会响应到这里。



> ==设置用户名与邮箱（用户标识，必要）==

当你安装Git后首先要做的事情是设置你的用户名称和email地址。这是非常重要的，因为每次Git提交都会使用该信息。它将永远的嵌入到你的提交中：

```shell
git config --global user.name "SomiLee0608"  # 名称
git config --global user.email "2754642243@qq.com" # 邮箱
```

只需要做一次这个设置。如果你希望在一个特定的项目中使用不同的名称和Email地址，你可以在该项目中运行该命令而不要--global 选项。



## 1.3 Git 基本理论

> 工作区域

Git 本地有三个工作区域： 工作目录（Working Directory）， 暂存区（Stage/Index）， 资源库（Repository 或 Git Directory）。如果加上远程的git仓库（Remote Directory）就可以分为四个工作区域。

![img](https://pic2.zhimg.com/80/v2-948b88649b9f68bffe8cdf0daefc0401_1440w.webp)

- Workspace ： 工作区，就是你平时存放项目代码的地方
- Index/Stage： 暂存区，用于临时存放你的改动，事实上它只是一个文件，保存即将提交到文件列表信息
- Repository： 仓库区（或本地仓库），就是安全存放数据的位置，这里面有你提交到所有版本的数据，其中HEAD指向最新放入仓库的版本。
- Remote：远程仓库，托管代码的服务器，可以简单的认为是你项目组中一台电脑用于远程数据交换

> 操作流程

git的工作流程一般是这样：

- 在工作目录中添加、修改文件
- 将需要进行版本管理的文件放入暂存区
- 将暂存区的文件提交到git仓库

因此，git管理文件有三种状态，已修改（modified），已暂存（staged），已提交（committed）

> 本地仓库搭建

搭建本地仓库的方式有两种，一种是创建全新的仓库，一种是克隆远程仓库

```bash
# 在当前目录新建一个git代码库
$ git init
```



## 1.4 Git 文件操作

> 文件4种状态

版本控制就是对文件的版本控制，要对文件进行修改，提交等操作，首先要知道文件当前处于什么状态，不然可能会提交了现在还不想提交的文件，或者要提交的文件没提交上。

- Untracked： 未跟踪，此文件在文件夹中，但并没有加入到git库，不参与版本控制，通过==git add== 状态变为 ==Staged==
- Unmodified： 文件已经入库，未修改，即版本库种的文件快照内容与文件夹中完全一致，这种类型的文件有两种去处，如果它被修改，而变成modified，如果使用==git rm== 移除版本库，则成为==untracked== 文件
- modified： 文件已修改，仅仅是修改，并没有进行其他操作，这个文件也有两个去处，通过==git add== 课进入暂存==staged== 状态，使用 ==git checkout==  则丢弃修改过，返回到==modified== 状态，这个==git checkout== 即从库中取出文件，覆盖当前修改！
- Staged： 暂存状态，执行==git commit== 则将修改同步到库种，这时库中的文件和本地文件又变成一只，文件为==unmodify== 状态，执行==git reset HEAD filename== 取消暂存，文件状态为==modified==



> 查看文件状态

```bash
# 查看指定文件状态
git status  [filename]

# 查看所有文件状态
git status

# git add .   添加所有文件到暂存区
# git commit -m 提交暂存区的内容到本地仓库， -m   提交信心  message
```



> 忽略文件

有些时候我们不想把某些文件纳入版本控制中，比如数据库文件、临时文件、设计文件等

在主目录下建立".gitignore"文件，此文件又如下规则：

- 忽略文件中的空行或以（#）开始的行将会被忽略
- 可以使用Linux通配符，*代表任意多个字符，？代表一个字符，方括号  []  代表可选字符范围，大括号  {}   代表可选字符串
- 如果名称的最前面有一个！，表示例外规则，将不可被忽略
- 如果名称最前面是一个路径分隔符 /  ，表示忽略的文件在此目录下，而子目录文件不忽略
- 如果名称最后面是一个路径分隔符 /， 表示要忽略的是此目录下该名称的子目录，而非文件





## 1.5 Git分支

分支意味着你可以从开发主线上分离开来，然后在不影响主线的同时继续工作。



![img](https://static.runoob.com/images/svg/git-brance.svg)

git 分支中常见命令

```bash
# 列出所有的本地分支
git branch
# 列出所有的远程分支
git branch -r
# 新建一个分支，但依然停留在当前分支
git branch [branch-name]
# 新建一个分支，并切换到该分支
git checkout -b [branch]
# 合并指定分支到当前分支
git merge [branch]
# 删除分支
git branch -d [branch-name]
# 删除远程分支
git push origin --delete [branch-name]
git branch -dr [remote/branch]

```

多个分支如果并行执行，就会导致我们代码不冲突，也就是同时存在多个版本！

==master 主分支应该非常稳定，用来发布新版本，一般情况下不允许在上面工作，工作一般是在新建的dev分支上，工作完成后，比如要发布，或者说dev分支代码稳定后可以合并到主分支master上来。==